<!DOCTYPE html>
<html lang="es" data-theme="dark">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, viewport-fit=cover, maximum-scale=1.0, user-scalable=no" />
    <title>Recuperar Acceso | Padeluminatis</title>
    <link rel="shortcut icon" href="./imagenes/Logojafs.png" type="image/x-icon">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link
        href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&family=Rajdhani:wght@500;600;700;800&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="./css/app.css" />
    <link rel="stylesheet" href="./css/auth.css" />
    <link rel="stylesheet" href="./css/shared-utils.css" />
</head>

<body class="app-body recovery-page">
    <div id="particles-js" class="particles-background"></div>

    <div class="auth-container">
        <div class="auth-card glass-strong">
            <div class="auth-header mb-5">
                <div class="icon-circle mx-auto mb-3"
                    style="width: 60px; height: 60px; background: rgba(0, 195, 255, 0.1); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: var(--accent); font-size: 1.5rem; border: 1px solid rgba(0, 195, 255, 0.2)">
                    <i class="fas fa-key"></i>
                </div>
                <h1 class="text-gradient auth-title">RECUPERAR</h1>
                <p class="text-muted text-xs uppercase tracking-widest font-bold">Enviaremos un enlace a tu email</p>
            </div>

            <form id="recoveryForm" class="text-left">
                <div class="form-group mb-5">
                    <label class="label-xs opacity-50 mb-2 block ml-1">TU CORREO REGISTRADO</label>
                    <input type="email" id="email" placeholder="socio@mistral.com" class="input-field" required>
                </div>

                <button type="submit" class="btn btn-primary w-full py-4 font-bold tracking-widest uppercase">
                    ENVIAR ENLACE <i class="fas fa-paper-plane ml-2"></i>
                </button>
            </form>

            <div class="auth-footer mt-5">
                <p class="text-sm opacity-60">Â¿Recordaste la clave? <a href="index.html"
                        class="text-primary font-bold">Volver</a></p>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
    <script type="module" src="./js/particles-init.js"></script>
    <script type="module">
        import { auth } from './js/firebase-config.js';
        import { sendPasswordResetEmail } from "https://www.gstatic.com/firebasejs/11.7.3/firebase-auth.js";
        import { showToast } from './js/ui-core.js';

        document.getElementById('recoveryForm').onsubmit = async (e) => {
            e.preventDefault();
            const email = document.getElementById('email').value;
            try {
                await sendPasswordResetEmail(auth, email);
                showToast('Enlace enviado. Revisa tu bandeja de entrada.', 'success');
                setTimeout(() => window.location.href = 'index.html', 3000);
            } catch (err) {
                showToast('Error al enviar el correo. Verifica el email.', 'error');
            }
        };
    </script>
</body>

</html>