<!DOCTYPE html>
<html lang="es" data-theme="dark">

<head>
  <meta charset="UTF-8">
  <meta name="viewport"
    content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <title>Panel de Administraci√≥n - Padeluminatis</title>
  <link rel="icon" type="image/x-icon" href="./imagenes/Logojafs.png">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link
    href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&family=Rajdhani:wght@500;600;700;800&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="./css/app.css">
  <link rel="stylesheet" href="./css/admin.css">
  <link rel="stylesheet" href="./css/modals.css">
  <link rel="stylesheet" href="./css/bottom-nav.css">
</head>

<body class="app-body">
  <!-- Header -->
  <header class="app-header">
    <div class="flex-center gap-sm">
      <img src="./imagenes/Logojafs.png" alt="Logo" class="header-logo">
      <h1 class="header-title">Admin Panel</h1>
    </div>
    <div class="flex-center gap-md">
      <a href="./notificaciones.html" class="btn-icon">
        <i class="fas fa-bell"></i>
      </a>
      <a href="./perfil.html" class="btn-icon">
        <img src="./imagenes/Logojafs.png" alt="Profile" style="width: 24px; height: 24px; border-radius: 50%;">
      </a>
    </div>
  </header>

  <main class="container" style="padding-bottom: 100px;">
    <!-- Selector de Secciones -->
    <section class="section-selector card" style="padding: 0.5rem; display: flex; gap: 0.5rem; overflow-x: auto;">
      <button class="btn btn-primary tab-btn active" data-section="admin-panel" style="flex: 1; white-space: nowrap;">
        <i class="fas fa-cogs"></i> Panel
      </button>
      <button class="btn btn-secondary tab-btn" data-section="firebase-console" style="flex: 1; white-space: nowrap;">
        <i class="fas fa-database"></i> Firebase
      </button>
    </section>

    <!-- SECCI√ìN 1: Panel de Administraci√≥n Original -->
    <div id="admin-panel" class="section-content active">
      <!-- Gesti√≥n de Usuarios -->
      <section class="card seccion-admin">
        <div class="flex-between" style="margin-bottom: 0.5rem;">
          <h2 style="margin: 0; font-size: 1rem;"><i class="fas fa-users-cog"></i> Usuarios</h2>
          <button class="btn btn-secondary" onclick="document.getElementById('modal-usuarios').classList.add('active')"
            style="padding: 4px 8px; font-size: 12px;">Ver</button>
        </div>
        <div class="stat-value" id="cuenta-usuarios" style="font-size: 1.5rem;">-</div>
        <div class="stat-label">Pendientes</div>
      </section>

      <!-- Gesti√≥n de Equipos -->
      <section class="card seccion-admin">
        <div class="flex-between" style="margin-bottom: 0.5rem;">
          <h2 style="margin: 0; font-size: 1rem;"><i class="fas fa-people-group"></i> Equipos</h2>
          <button class="btn btn-secondary" onclick="document.getElementById('modal-equipos').classList.add('active')"
            style="padding: 4px 8px; font-size: 12px;">Ver</button>
        </div>
        <div class="stat-value" id="cuenta-equipos" style="font-size: 1.5rem;">-</div>
        <div class="stat-label">Registrados</div>
      </section>

      <!-- Gesti√≥n de Calendario -->
      <section class="card seccion-admin">
        <div class="flex-between" style="margin-bottom: 0.5rem;">
          <h2 style="margin: 0; font-size: 1rem;"><i class="fas fa-calendar-plus"></i> Calendario</h2>
          <button class="btn btn-secondary"
            onclick="document.getElementById('modal-calendario').classList.add('active')"
            style="padding: 4px 8px; font-size: 12px;">Ver</button>
        </div>
        <div class="stat-value" id="cuenta-jornadas" style="font-size: 1.5rem;">-</div>
        <div class="stat-label">Jornadas</div>
      </section>

      <!-- Partidos Jugados -->
      <section class="card seccion-admin">
        <div class="flex-between" style="margin-bottom: 0.5rem;">
          <h2 style="margin: 0; font-size: 1rem;"><i class="fas fa-check-double"></i> Jugados</h2>
          <button class="btn btn-secondary" onclick="document.getElementById('modal-jugados').classList.add('active')"
            style="padding: 4px 8px; font-size: 12px;">Ver</button>
        </div>
        <div class="stat-value" id="cuenta-jugados" style="font-size: 1.5rem;">-</div>
        <div class="stat-label">Partidos</div>
      </section>

      <!-- Partidos Pendientes -->
      <section class="card seccion-admin">
        <div class="flex-between" style="margin-bottom: 0.5rem;">
          <h2 style="margin: 0; font-size: 1rem;"><i class="fas fa-hourglass-half"></i> Pendientes</h2>
          <button class="btn btn-secondary"
            onclick="document.getElementById('modal-pendientes').classList.add('active')"
            style="padding: 4px 8px; font-size: 12px;">Ver</button>
        </div>
        <div class="stat-value" id="cuenta-pendientes" style="font-size: 1.5rem;">-</div>
        <div class="stat-label">Partidos</div>
      </section>
    </div>

    <!-- SECCI√ìN 2: Firebase Console Integrada -->
    <div id="firebase-console" class="section-content" style="display: none;">
      <!-- Panel de Control Principal -->
      <section class="admin-dashboard card">
        <div class="dashboard-header">
          <h2 class="section-title" style="margin-bottom: 1rem;">
            <i class="fas fa-database"></i> Firebase Console
          </h2>
          <div class="dashboard-stats" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem;">
            <div class="stat-card"
              style="background: var(--bg-surface-2); padding: 1rem; border-radius: 8px; text-align: center;">
              <i class="fas fa-users text-primary"></i>
              <div class="stat-number" id="total-users" style="font-size: 1.5rem; font-weight: bold;">-</div>
              <div class="stat-label">Usuarios</div>
            </div>
            <div class="stat-card"
              style="background: var(--bg-surface-2); padding: 1rem; border-radius: 8px; text-align: center;">
              <i class="fas fa-people-group text-accent"></i>
              <div class="stat-number" id="total-teams" style="font-size: 1.5rem; font-weight: bold;">-</div>
              <div class="stat-label">Equipos</div>
            </div>
            <div class="stat-card"
              style="background: var(--bg-surface-2); padding: 1rem; border-radius: 8px; text-align: center;">
              <i class="fas fa-calendar text-primary"></i>
              <div class="stat-number" id="total-matches" style="font-size: 1.5rem; font-weight: bold;">-</div>
              <div class="stat-label">Partidos</div>
            </div>
            <div class="stat-card"
              style="background: var(--bg-surface-2); padding: 1rem; border-radius: 8px; text-align: center;">
              <i class="fas fa-trophy text-accent"></i>
              <div class="stat-number" id="total-collections" style="font-size: 1.5rem; font-weight: bold;">-</div>
              <div class="stat-label">Colecciones</div>
            </div>
          </div>
        </div>
      </section>

      <!-- √Årbol visual de Firestore -->
      <section class="collections-nav card">
        <div class="firebase-tree-panel">
          <div class="firebase-tree-header"
            style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
            <span class="firebase-tree-title"><i class="fas fa-database"></i> Estructura</span>
            <button class="btn btn-primary" id="btn-add-collection-tree" style="padding: 4px 8px; font-size: 12px;"><i
                class="fas fa-plus"></i> A√±adir</button>
          </div>
          <div id="firebase-tree" class="firebase-tree"></div>
        </div>
      </section>

      <!-- Editor de Firebase -->
      <section class="firebase-editor card" id="firebase-editor" style="display: none;">
        <div class="editor-header" style="margin-bottom: 1rem;">
          <div class="breadcrumb" id="breadcrumb"
            style="font-size: 12px; color: var(--text-muted); margin-bottom: 0.5rem;">
            <span class="breadcrumb-item">Firebase</span>
          </div>
          <div class="editor-actions" style="display: flex; gap: 0.5rem;">
            <button class="btn btn-secondary" id="btn-back" style="flex: 1;"><i class="fas fa-arrow-left"></i></button>
            <button class="btn btn-primary" id="btn-save-changes" style="flex: 1;"><i class="fas fa-save"></i></button>
            <button class="btn btn-secondary" id="btn-delete-item"
              style="flex: 1; border-color: #ff4444; color: #ff4444;"><i class="fas fa-trash"></i></button>
          </div>
        </div>

        <div class="editor-content">
          <div class="editor-sidebar" style="margin-bottom: 1rem;">
            <div class="sidebar-section">
              <div class="flex-between">
                <h4><i class="fas fa-list"></i> Documentos</h4>
                <button class="btn btn-primary" id="btn-add-document" style="padding: 2px 6px; font-size: 10px;"><i
                    class="fas fa-plus"></i></button>
              </div>
              <div class="documents-list" id="documents-list"
                style="max-height: 150px; overflow-y: auto; background: var(--bg-surface-2); padding: 0.5rem; border-radius: 4px; margin-top: 0.5rem;">
                <!-- Lista de documentos -->
              </div>
            </div>
          </div>

          <div class="editor-main">
            <div class="document-editor" id="document-editor"
              style="background: var(--bg-surface-2); padding: 1rem; border-radius: 4px; min-height: 200px;">
              <div class="editor-placeholder" style="text-align: center; color: var(--text-muted); padding-top: 2rem;">
                <i class="fas fa-file-alt" style="font-size: 2rem; margin-bottom: 1rem;"></i>
                <p>Selecciona un documento</p>
              </div>
            </div>
          </div>
        </div>
      </section>
    </div>
  </main>

  <!-- Modales para Panel de Administraci√≥n Original -->
  <div class="admin-modal modal" id="modal-usuarios">
    <div class="modal-content">
      <div class="close" onclick="this.closest('.admin-modal').classList.remove('active')">&times;</div>
      <h2 class="user-management-title">Gesti√≥n de Usuarios</h2>
      <div class="users-grid" id="lista-usuarios">
        <!-- Los usuarios se cargar√°n din√°micamente aqu√≠ -->
      </div>
    </div>
  </div>

  <div class="admin-modal modal" id="modal-equipos">
    <div class="modal-content">
      <div class="close" onclick="this.closest('.admin-modal').classList.remove('active')">&times;</div>
      <h2 class="user-management-title">Gesti√≥n de Equipos</h2>
      <div class="form-equipo-compact">
        <div class="equipo-creator" style="display: flex; gap: 4px; align-items: center; margin-bottom: 1rem;">
          <select id="select-jugador1" class="input-field" style="flex: 1;">
            <option value="">J1</option>
          </select>
          <span class="vs-compact">VS</span>
          <select id="select-jugador2" class="input-field" style="flex: 1;">
            <option value="">J2</option>
          </select>
          <button id="btn-crear-equipo" class="btn btn-primary" style="padding: 8px;">
            <i class="fas fa-plus"></i>
          </button>
        </div>
      </div>
      <div class="equipos-lista">
        <h3 class="section-subtitle">Equipos Existentes</h3>
        <ul id="lista-equipos-admin" class="lista-equipos-compact" style="max-height: 200px; overflow-y: auto;"></ul>
      </div>
    </div>
  </div>

  <div class="admin-modal modal" id="modal-calendario">
    <div class="modal-content">
      <div class="close" onclick="this.closest('.admin-modal').classList.remove('active')">&times;</div>
      <h2 class="user-management-title">Gesti√≥n de Calendario</h2>
      <div class="form-jornada">
        <input type="text" id="nombre-jornada" class="input-field" placeholder="Nombre de la jornada"
          style="margin-bottom: 1rem;">
        <div id="partidos-jornada" class="contenedor-partidos" style="margin-bottom: 1rem;"></div>
        <div class="controles-jornada" style="display: flex; gap: 1rem;">
          <button id="btn-anadir-partido" class="btn btn-secondary w-full">
            Ôºã Partido
          </button>
          <button id="btn-crear-jornada" class="btn btn-primary w-full">
            üóìÔ∏è Crear
          </button>
        </div>
      </div>
    </div>
  </div>

  <div class="admin-modal modal" id="modal-jugados">
    <div class="modal-content">
      <div class="close" onclick="this.closest('.admin-modal').classList.remove('active')">&times;</div>
      <h2 class="user-management-title">Partidos Jugados</h2>
      <div id="partidos-jugados" class="lista-partidos-admin" style="max-height: 300px; overflow-y: auto;"></div>
    </div>
  </div>

  <div class="admin-modal modal" id="modal-pendientes">
    <div class="modal-content">
      <div class="close" onclick="this.closest('.admin-modal').classList.remove('active')">&times;</div>
      <h2 class="user-management-title">Partidos Pendientes</h2>
      <div id="partidos-pendientes" class="lista-partidos-pendientes" style="max-height: 300px; overflow-y: auto;">
      </div>
    </div>
  </div>

  <!-- Modales para Firebase Console (Simplified structure for app.css) -->
  <!-- Modal para Nuevo Campo -->
  <div class="modal" id="modal-new-field">
    <div class="modal-content">
      <div class="close" onclick="document.getElementById('modal-new-field').style.display='none'">&times;</div>
      <h3><i class="fas fa-plus-circle"></i> Nuevo Campo</h3>
      <div class="form-group">
        <label>Nombre:</label>
        <input type="text" id="field-name" class="input-field" placeholder="nombre">
      </div>
      <div class="form-group">
        <label>Tipo:</label>
        <select id="field-type" class="input-field">
          <option value="string">Texto</option>
          <option value="number">N√∫mero</option>
          <option value="boolean">Booleano</option>
          <option value="array">Array</option>
          <option value="object">Objeto</option>
          <option value="timestamp">Fecha/Hora</option>
          <option value="reference">Referencia</option>
        </select>
      </div>
      <div class="form-group">
        <label>Valor:</label>
        <input type="text" id="field-value" class="input-field" placeholder="Valor">
      </div>
      <div class="flex-between" style="margin-top: 1rem;">
        <button class="btn btn-secondary"
          onclick="document.getElementById('modal-new-field').style.display='none'">Cancelar</button>
        <button class="btn btn-primary" onclick="addNewFieldToDocument()">A√±adir</button>
      </div>
    </div>
  </div>

  <!-- Bottom Navigation -->
  <nav class="bottom-nav">
    <a href="./home.html" class="nav-link">
      <i class="fas fa-home"></i>
      <span>Inicio</span>
    </a>
    <a href="./eventos.html" class="nav-link">
      <i class="fas fa-calendar-check"></i>
      <span>Eventos</span>
    </a>
    <a href="./puntosRanking.html" class="nav-fab">
      <i class="fas fa-trophy"></i>
    </a>
    <a href="./partidos.html" class="nav-link">
      <i class="fas fa-clipboard-list"></i>
      <span>Partidos</span>
    </a>
    <a href="./perfil.html" class="nav-link">
      <i class="fas fa-user"></i>
      <span>Perfil</span>
    </a>
  </nav>

  <script type="module" src="./js/admin.js"></script>
  <script type="module" src="./js/firebaseAdmin.js"></script>
  <script type="module" src="./js/enlaceAdmin.js"></script>
  <script src="./js/menu-hamburguesa.js"></script>
</body>

</html>